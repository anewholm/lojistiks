fields:
    location[name]:
        label: acorn.lojistiks::lang.models.general.name
        type: text
        span: left
    #location[image]:
        #label: acorn.lojistiks::lang.models.general.image
        #type: mediafinder
        #mode: image
        #useCaption: true
        #imageHeight: 150
        #imageWidth: 150
        #thumbOptions:
            #mode: crop
            #extension: auto
        #span: auto
    location[backend_user_group]:
        label: acorn.lojistiks::lang.models.general.backend_user_group
        type: dropdown
        options: Acorn\Model::dropdownOptions
        optionsModel: \Backend\Models\UserGroup
        placeholder: acorn.lojistiks::lang.models.general.select
        span: right

    # -------------------------------- Existing Address
    _select_an_existing_address:
        label: acorn.lojistiks::lang.models.address.select_existing
        type: switch
        span: left
        context: create
    location[address]:
        type: dropdown
        options: Acorn\Lojistiks\Models\Address::dropdownOptions
        nameFrom: fully_qualified_name
        span: left
        trigger:
            field: _select_an_existing_address
            condition: checked
            action: enable
        context: create
    # -------------------------------- New Address
    location[address][name]:
        label: acorn.lojistiks::lang.models.address.label
        type: text
        span: auto
        trigger:
            field: _select_an_existing_address
            condition: checked
            action: disable
    location[address][number]:
        label: acorn.lojistiks::lang.models.address.number
        type: text
        span: auto
        trigger:
            field: _select_an_existing_address
            condition: checked
            action: disable
    location[address][area]:
        label: acorn.lojistiks::lang.models.area.label
        type: dropdown
        options: Acorn\Lojistiks\Models\Area::dropdownOptions
        placeholder: acorn.lojistiks::lang.models.general.select
        nameFrom: fully_qualified_name
        span: auto
        required: true
        trigger:
            field: _select_an_existing_address
            condition: checked
            action: disable
    location[address][gps][longitude]:
        label: acorn.lojistiks::lang.models.gps.longitude
        type: number
        span: auto
        trigger:
            field: _select_an_existing_address
            condition: checked
            action: disable
    location[address][gps][latitude]:
        label: acorn.lojistiks::lang.models.gps.latitude
        type: number
        span: auto
        trigger:
            field: _select_an_existing_address
            condition: checked
            action: disable
    _qrcode:
        type: partial
        context: update
        path: ~/modules/acorn/partials/_qrcode

# --------------------------------------- Context Update
tabs:
  fields:
    location[transfers_in]:
        type: relation
        context: update
        nameFrom: source_name
        cssClass: selected-only
        tab: acorn.lojistiks::lang.models.transfer.transfers_in
    location[transfers_out]:
        type: relation
        context: update
        nameFrom: destination_name
        cssClass: selected-only
        tab: acorn.lojistiks::lang.models.transfer.transfers_out
    location[stock_products]:
        type: relation
        context: update
        nameFrom: fully_qualified_name
        # TODO: stock_products is a non-automatically updateable view due to its group-by
        disabled: true
        cssClass: selected-only
        tab: acorn.lojistiks::lang.models.stockproduct.label_plural
    location[stock]:
        type: relation
        context: update
        scope: singleUnits
        nameFrom: fully_qualified_name
        # NOTE: stock_products is a non-automatically updateable view due to its group-by
        disabled: true
        cssClass: selected-only
        tab: acorn.lojistiks::lang.models.stock.label_plural
        #containerAttributes:
          # TODO: goto-form-group-selection: ../../productinstances
    location[employees]:
        type: relation
        context: update
        nameFrom: employment
        cssClass: selected-only
        tab: acorn.lojistiks::lang.models.employee.label_plural
    location[vehicles]:
        type: relation
        context: update
        disabled: true
        nameFrom: vehicle_name
        cssClass: selected-only
        containerAttributes:
          goto-form-group-selection: ../../vehicles
        tab: acorn.lojistiks::lang.models.vehicle.label_plural

    response:
        label: acorn.lojistiks::lang.plugin.trigger_http_call_response
        type: richeditor
        size: huge
        context: update
        permission:
          - acornassocaited.lojistiks.debug
        tab: acorn.lojistiks::lang.plugin.replication_debug
